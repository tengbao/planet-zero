!function(t){function e(i){if(s[i])return s[i].exports;var r=s[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var s={};e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.camelToSpace=function(){var t;return t=this.replace(/([A-Z])/g,function(t){return" "+t[0]}),t.charAt(0).toUpperCase()+t.slice(1)},Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)};var r,n,a,h,o,l,p,u,c,d,m,f,y,w,v,x,b,M,P=function(){return console.log.apply(this,arguments)},S=function(t,e){return null==t&&(t=0),null==e&&(e=1),t+Math.random()*(e-t)},C=function(t,e){return null==t&&(t=0),null==e&&(e=1),Math.floor(t+Math.random()*(e-t+1))},A=(function(){var t,e,s;t=1e9,s=353456907,e=1}(),function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}()),L=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},T=T=function(){function t(e,s,i,r){var n,a,h;if(e instanceof t)return e;if("string"==typeof e)if(n=e.replace(/\s/g,""),h=null,h=/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(n))this.r=parseInt(h[1]+h[1],16),this.g=parseInt(h[2]+h[2],16),this.b=parseInt(h[3]+h[3],16);else if(h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))this.r=parseInt(h[1],16),this.g=parseInt(h[2],16),this.b=parseInt(h[3],16);else if(h=/^rgba\(([\d]+),([\d]+),([\d]+),([\d]+|[\d]*.[\d]+)\)/.exec(n))this.r=+h[1],this.g=+h[2],this.b=+h[3],this.a=+h[4];else{if(!(h=/^rgb\(([\d]+),([\d]+),([\d]+)\)/.exec(n)))throw new Error("Invalid color constructor from "+e);this.r=+h[1],this.g=+h[2],this.b=+h[3]}else if("object"==typeof e&&"number"==typeof e.r)this.r=(~~e.r).clamp(0,255),this.g=(~~e.g).clamp(0,255),this.b=(~~e.b).clamp(0,255),this.a=null!=(a=e.a)&&"function"==typeof a.clamp?a.clamp(0,1):void 0;else{if("number"!=typeof e)throw new Error("Invalid color constructor from "+e);this.r=(~~e).clamp(0,255),this.g=(~~s).clamp(0,255),this.b=(~~i).clamp(0,255),this.a=null!=r&&"function"==typeof r.clamp?r.clamp(0,1):void 0}(void 0===this.a||isNaN(this.a))&&(this.a=1)}return t.prototype.toHex=function(){return"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1)},t.prototype.toRgba=function(t){return"rgba("+this.r+","+this.g+","+this.b+","+(null!=t?t:this.a)+")"},t.prototype.mix=function(e,s,i){var r,n;return null==s&&(s=.5),null==i&&(i=!1),r=new t(e),n=s.clamp(0,1),new t(this.r*(1-n)+r.r*n,this.g*(1-n)+r.g*n,this.b*(1-n)+r.b*n,null!=i?i:this.a*(1-n)+r.a*{x:this.a})},t.prototype.toGradientCSSProperty=function(e,s,i,r){var n,a,h,o,l,p,u,c,d,g,m,f;if(null==s&&(s=10),null==i&&(i=20),null==r&&(r=80),!hsluv)return"";for(e instanceof t||(e=new t(e)),f=hsluv.hexToHsluv(this.toHex()),a=hsluv.hexToHsluv(e.toHex()),a[0]-f[0]>180&&(a[0]=a[0]-360),m="linear-gradient(120deg",h=d=0,g=s;0<=g?d<=g:d>=g;h=0<=g?++d:--d)o=h/s*(a[0]-f[0])+f[0],c=h/s*(a[1]-f[1])+f[1],u=h/s*(a[2]-f[2])+f[2],l=(o+360)%360,p=hsluv.hsluvToHex([l,c,u]),n=(h/s*(r-i)+i).toFixed(2)+"%",m+=", "+p+" "+n;return m+=")"},t}(),X=function(t,e){return function(){return t.apply(e,arguments)}},Y=function(t,e){function s(){this.constructor=t}for(var i in e)k.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},k={}.hasOwnProperty;M=function(){if(n)return window.C=T,window.ps=window.g.planets,window.p=ps[0]},v=.1,n=-1!==window.location.toString().indexOf("DEBUG")||-1!==window.location.toString().indexOf("localhost"),b=Math.PI,p=200,y=["#a6b0c0,#505357,#aaaaaa","#FFC926,#FF8000,#ffcc66","#68E6FF,#2B60FF,#68E6FF","#75EB08,#2D643C,#85DB5B","#FF4878,#990020,#EE2050,#aa2848","xxx,xxx"],x=function(t,e){return null==e&&(e=0),y[t].split(",")[e]},l=[{name:"Fire & Forget",planets:["1t/50r/15p/-150,-20/Click & drag me!","2t/50r/ 3p/ 150, 20"],aiGrowthMultiplier:.9},{name:"Sharpshooter",planets:["1t/80r/20p/-150,150/Big planets aren't so accurate","1t/20r/20p/ 150,150/Little planets are more accurate!","2t/30r/10p/   0,-150"],playerGrowthMultiplier:.75,aiLaunchMultiplier:.1},{name:"Patience",planets:["1t/40r/15p/-200,0/Wait for blue to fire first...","0t/60r/15p /  0,0","2t/40r/15p/200,0"],playerGrowthMultiplier:1.35,aiGrowthMultiplier:1.1},{name:"Island Hopping"},{name:"Galaxy",galaxyLength:4},{name:"Orbits",planets:["1t/40r/10p/-220,0//0,0/1","2t/40r/10p/ 220,0//0,0/1"],playerGrowthMultiplier:1.25},{name:"Transport",planets:["1t/40r/10p/-500,0/","0t/50r/5p/-625,70/","0t/22r/5p/-610,-65/","2t/40r/10p/ 510,-50/","2t/25r/5p / 490,50/","0t/20r/5p / 550,100/","0t/20r/5p / 620,-140/","0t/20r/5p / 640,20/","0t/50r/5p/-80,280//0,0/-0.667","0t/35r/8p/80,-280//0,0/-0.667","0t/60r/10p/0,25//0,0/-2","0t/22r/8p/0,120//0,0/2","0t/25r/8p/-84,-84//0,0/2","0t/20r/8p/84,-84//0,0/2"]},{name:"Chasm",planets:["1t/20r/10p/-480,80//-500,120/2","0t/30r/5p/-560,180//-500,120/1","0t/50r/5p/-500,0//-500,120/1","0t/22r/5p/-520,120//-500,120/2","0t/25r/5p/-500,140//-500,120/2","0t/20r/5p/-350,300//-500,120/-2","2t/40r/5p/ 410,-50//400,-120/1","2t/25r/5p / 340,-50//400,-120/1","0t/20r/5p / 450,-100//400,-120/2","0t/20r/5p / 520,-140//400,-120/1","0t/20r/5p / 360,-140//400,-120/2","0t/25r/5p / 400,-180//400,-120/1.5","0t/20r/5p/  250,-300//400,-120/-2"],playerGrowthMultiplier:1.25,aiGrowthMultiplier:1.25},{name:"Big Galaxy",galaxyLength:5,galaxyTeams:4,orbit:!0}],r=["starsCont","planetFxCont","lassoCont","trailsCont","planetsCont","cursorsCont","unitsCont"],o=function(){function t(){this.onMouseUpdate=X(this.onMouseUpdate,this),this.endLasso=X(this.endLasso,this),this.startLasso=X(this.startLasso,this),this.lose=X(this.lose,this),this.win=X(this.win,this),this.update=X(this.update,this),this.resizeAndCenterMap=X(this.resizeAndCenterMap,this);var t,e,s,i,n,a,o,p;for(this.storage=new f(this),this.fps=new h,this.tooltipContent=null,this.stage=new createjs.Stage("canvas"),s=0,n=r.length;s<n;s++)e=r[s],t=new createjs.Container,this.stage.addChild(t),this[e]=t;if(this.setupZoomControls(),this.setupMousePosition(),this.cursorPointer=!1,this.paused=!1,this.storage.data.version!==v&&(this.storage.clear(),this.storage.saveProperty("version",v)),t=this.storage.data.currentLevel)this.loadMap(t);else{for(p=0,o=i=0,a=l.length;i<a;o=++i)if(l[o],!this.storage.data.levelsCompleted[o]){p=o;break}this.loadMap(p)}this.resizeAndCenterMapDebounced=_.debounce(this.resizeAndCenterMap,100),$(window).resize(this.resizeAndCenterMapDebounced),this.stage.update(),A(this.update)}return t.prototype.maps=l,t.prototype.pause=function(){return this.paused=!this.paused},t.prototype.unpause=function(){return this.paused=!1},t.prototype.restart=function(){if(confirm("Restart this level?"))return this.loadMap(this.level)},t.prototype.getMapProp=function(t){return this.maps[this.level][t]},t.prototype.confirmLoadMap=function(t){return t===this.level?this.unpause():g.life<600?this.loadMap(t):confirm("Are you sure you want to leave the current level?")?this.loadMap(t):void 0},t.prototype.loadMap=function(t){var e,s,i,r,n,a,h,o,p,u,d,g,f,y,w,v,x,M,P,A,L,T,X,Y,k,F,z,R,U,I,O,B,E,D,G,_,j,H,N,q;if(null==t&&(t=0),this.deleteAllSprites(),this.endGame=!1,this.paused=!1,this.life=0,this.planets=[],this.units=[],this.parts=[],this.boundingBoxMemoized=null,this.setupLassoControls(),!l[t]&&t>l.length-1&&(t=l.length-1),this.level=t,this.storage.saveProperty("currentLevel",this.level),d=l[t])if(g=d.name,d.planets)for(k=d.planets,h=0,p=k.length;h<p;h++)L=k[h],A=L.split("/"),j=parseInt(A[0]),Y=parseFloat(A[1]),T=parseInt(A[2]),N=parseFloat(null!=(F=A[3])?F.split(",")[0]:void 0),q=parseFloat(null!=(z=A[3])?z.split(",")[1]:void 0),H=null!=(R=A[4])?R.trim():void 0,M=parseFloat(null!=(U=A[5])?U.split(",")[0]:void 0),P=parseFloat(null!=(I=A[5])?I.split(",")[1]:void 0),x=parseFloat(A[6]),this.planets.push(new c(this,N,q,Y,j,T,{orbitX:M,orbitY:P,orbitSpeed:x,tooltip:H}));else if("Island Hopping"===g)for(i=560,r=280,this.planets.push(new c(this,1.05*-i,C(-r,r),C(20,50),1,20)),this.planets.push(new c(this,1.05*i,C(.75*r,r),C(20,50),2,20)),this.planets.push(new c(this,1.05*i,-C(.75*r,r),C(20,50),3,20)),a=o=1,O=C(7,9);1<=O?o<=O:o>=O;a=1<=O?++o:--o)D=C(10,25)+C(10,25),D*=S(.4,1.5),D=D.clamp(20,100),this.planets.push(new c(this,C(-i,i),C(-r,r),D,0,C(2,10)));else if(-1!==g.indexOf("Galaxy"))for(this.planets.push(new c(this,0,0,C(80,100),0,20)),y=d.galaxyTeams||3,f=d.galaxyLength,a=u=1,B=f;1<=B?u<=B:u>=B;a=1<=B?++u:--u)for(n=150+60*a+C(0,20),s=S(-.5,.5),D=C(20,40),T=C(5,10),G=C(15,25),j=0,_=w=1,E=y;1<=E?w<=E:w>=E;_=1<=E?++w:--w)e=_/y*b*2+s+b/2,N=n*Math.cos(e),q=n*Math.sin(e),a===f&&(j=_,T=G,1!==j&&(T=~~(T*=1.6))),v={},d.orbit&&(v={orbitX:0,orbitY:0,orbitSpeed:-62.5/n}),this.planets.push(new c(this,N,q,D,j,T,v));else alert("Error: Level data not found - "+t);for(a=X=0;X<=150;a=++X)new m(this);return this.setZoom(1),this.resizeAndCenterMap(!0)},t.prototype.resizeAndCenterMap=function(t){var e,s,i,r,n;return null==t&&(t=!1),this.stage.canvas.width=window.innerWidth,this.stage.canvas.height=window.innerHeight,p=(.2*(window.innerWidth+window.innerHeight)).clamp(150,300),e=this.getBoundingBox(),n=e.w/(.9*window.innerWidth),s=e.h/(.9*window.innerHeight),(n>1||s>1)&&(r=1/Math.max(n,s),this.setZoom(r)),this.zoom||1,i=this.getPanCenter(),this.panX=i.x,this.panY=i.y},t.prototype.update=function(){var t,e,s,i,r,n,a,h,o,l,p,u,c,d;if(this.fps.update(),A(this.update),!this.paused){for(this.life+=1,this.numComputerPlanets=0,this.numPlayerPlanets=0,this.numComputerUnits=0,this.numPlayerUnits=0,h=this.planets,t=0,s=h.length;t<s;t++)a=h[t],null!=a&&a.update(),a.team>1&&(this.numComputerPlanets+=1),1===a.team&&(this.numPlayerPlanets+=1);for(o=this.units,e=0,i=o.length;e<i;e++)d=o[e],null!=d&&d.update(),d.team>1&&(this.numComputerUnits+=1),1===d.team&&(this.numPlayerUnits+=1);for(l=this.parts,n=0,r=l.length;n<r;n++)null!=(a=l[n])&&a.update();return this.endGame||(0===this.numComputerPlanets&&0===this.numComputerUnits?(setTimeout(this.win,700),this.endGame=!0):0===this.numPlayerPlanets&&0===this.numPlayerUnits&&(setTimeout(this.lose,700),this.endGame=!0)),(this.keys.arrowup||this.keys.w)&&this.pan(0,-15),(this.keys.arrowleft||this.keys.a)&&this.pan(-15,0),(this.keys.arrowdown||this.keys.s)&&this.pan(0,15),(this.keys.arrowright||this.keys.d)&&this.pan(15,0),p=this.stage,u=(p.tx||0)-(this.panX||0),c=(p.ty||0)-(this.panY||0),u&&u!==p.x&&(1===this.life?(p.x=u,p.y=c):(p.x+=.2*(u-p.x),p.y+=.2*(c-p.y)),this.onMouseUpdateRecalculate()),p.tsx&&p.tsx!==p.scaleX&&(p.scaleX+=.2*(p.tsx-p.scaleX),p.scaleY+=.2*(p.tsy-p.scaleY),this.starsCont.scaleX=Math.pow(1/p.scaleX,.8),this.starsCont.scaleY=Math.pow(1/p.scaleY,.8),this.starsCont.x=.9*(p.tx+this.panX),this.starsCont.y=.9*(p.ty+this.panY),this.onMouseUpdateRecalculate()),p=this.lasso,this.isLassoing&&this.pressStartX&&this.pressStartY?(p.visible=!0,p.x=this.pressStartX,p.y=this.pressStartY,p.graphics.clear().setStrokeStyle(.5).beginStroke("#fff").beginFill("rgba(255,255,255,0.05)"),p.graphics.rect(0,0,this.mouseX-this.pressStartX,this.mouseY-this.pressStartY),this.setLassoedPlanets()):p.visible=!1,this.stage.update()}},t.prototype.isLowRes=function(){return this.zoom<.7||L()},t.prototype.win=function(){return s.play("victory",.75),setTimeout(function(t){return function(){return alert("you win"),t.storage.completeLevel(t.level),t.loadMap(t.level+1)}}(this),500)},t.prototype.lose=function(){return s.play("loss",.75),setTimeout(function(t){return function(){return alert("you lose"),t.loadMap(t.level)}}(this),500)},t.prototype.deleteAllSprites=function(){var t,e,s;for(e=0,s=r.length;e<s;e++)t=r[e],this[t].removeAllChildren();return this.cursorPointer=!1,app.$refs.tooltipCont._tooltip.hide()},t.prototype.setupZoomControls=function(){var t,e,s;return this.zoom||(this.zoom=1),s="mousewheel wheel DOMMouseScroll",$(window).off(s).on(s,function(t){return function(e){var s;return s="DOMMouseScroll"===e.type?-40*e.originalEvent.detail:"touchmove"===e.type?e.originalEvent.touches[0].clientY-lastTouchY:e.originalEvent.wheelDelta,s>0?t.setZoom(t.zoom+.2):s<0?t.setZoom(t.zoom-.2):void 0}}(this)),this.keys={},t=function(t){return function(e){return t.hoverPlanet?t.hoverPlanet.mouseDown():t.pressedPlanet?void 0:t.startLasso()}}(this),e=function(t){return function(e){return t.pressedPlanet?t.pressedPlanet.pressUp():t.endLasso()}}(this),document.addEventListener("keydown",function(e){return function(s){var i;return i=s.key.toLowerCase()," "!==i||e.keys[i]?n&&"l"===i&&!e.keys[i]&&e.hoverPlanet&&e.hoverPlanet.mouseDown("launcher"):t(s),e.keys[i]=!0}}(this)),document.addEventListener("keyup",function(t){return function(s){var i;return i=s.key.toLowerCase()," "===i?e(s):"l"===i&&(t.pressedPlanet&&"launcher"===t.pressedMode?t.pressedPlanet.pressUp("launcher"):t.endLasso()),t.keys[i]=!1}}(this)),document.addEventListener("mousedown",t),document.addEventListener("mouseup",e),$(window).blur(function(t){return function(){var e,s;s=t.keys;for(e in s)s[e],t.keys[e]=!1;if(t.isLassoing=!1,t.pressedPlanet)return t.pressedPlanet=null}}(this))},t.prototype.pan=function(t,e){var s,i,r,n,a;return a=this.zoom,this.panX||(this.panX=0),this.panY||(this.panY=0),s=this.getBoundingBox(),i=this.getPanCenter(),r=((s.w*a-window.innerWidth)/2+100).clamp(100,1e4),n=((s.h*a-window.innerHeight)/2+100).clamp(100,1e4),this.panX=(this.panX+=t).clamp(i.x-r,i.x+r),this.panY=(this.panY+=e).clamp(i.y-n,i.y+n)},t.prototype.getPanCenter=function(){var t,e;return e=this.zoom,t=this.getBoundingBox(),{x:-((window.innerWidth-t.w*e)/2-t.x*e),y:-((window.innerHeight-t.h*e)/2-t.y*e)}},t.prototype.setupLassoControls=function(){var t;return t=new createjs.Shape,t.graphics.clear().beginFill("rgba(0,0,0,0.01)"),t.graphics.rect(-2e3,-2e3,4e3,4e3),this.lassoCont.addChild(t),this.lassoStage=t,t=new createjs.Shape,this.lassoCont.addChild(t),this.lasso=t},t.prototype.startLasso=function(){return this.isLassoing=!0,this.pressStartX=this.mouseX,this.pressStartY=this.mouseY},t.prototype.endLasso=function(){return this.isLassoing=!1},t.prototype.setLassoedPlanets=function(){var t,e,s,i,r,n,a,h,o,l,p;for(i=this.planets,o=[],t=0,e=i.length;t<e;t++)s=i[t],1===s.team&&(l=this.mouseX>(r=s.x)&&r>this.pressStartX||this.mouseX<(n=s.x)&&n<this.pressStartX,p=this.mouseY>(a=s.y)&&a>this.pressStartY||this.mouseY<(h=s.y)&&h<this.pressStartY,o.push(s.isSelected=l&&p));return o},t.prototype.deselectAllPlanets=function(){var t,e,s,i,r;for(i=this.planets,r=[],t=0,e=i.length;t<e;t++)s=i[t],r.push(s.isSelected=!1);return r},t.prototype.setupMousePosition=function(){return document.addEventListener("mousemove",this.onMouseUpdate,!1),document.addEventListener("mouseenter",this.onMouseUpdate,!1)},t.prototype.onMouseUpdate=function(t){return this.mousePageX=t.pageX,this.mousePageY=t.pageY,this.onMouseUpdateRecalculate()},t.prototype.onMouseUpdateRecalculate=function(){return this.mouseX=(this.mousePageX-this.stage.x)/this.zoom,this.mouseY=(this.mousePageY-this.stage.y)/this.zoom},t.prototype.gamePositionToPagePosition=function(t,e){return{x:t*this.zoom+this.stage.x,y:e*this.zoom+this.stage.y}},t.prototype.setZoom=function(t){if(!this.paused)return this.zoom=t.clamp(.4,1.6),this.stage.tsx=this.stage.tsy=this.zoom},t.prototype.getBoundingBox=function(){var t,e,s,i,r,n,a,h,o;if(this.boundingBoxMemoized)return this.boundingBoxMemoized;for(n=Infinity,i=-Infinity,a=Infinity,r=-Infinity,o=this.planets,e=0,s=o.length;e<s;e++)h=o[e],h.orbitRadius&&null!=h.orbitX&&null!=h.orbitY?((t=h.orbitX-h.orbitRadius-h.r)<n&&(n=t),(t=h.orbitX+h.orbitRadius+h.r)>i&&(i=t),(t=h.orbitY-h.orbitRadius-h.r)<a&&(a=t),(t=h.orbitY+h.orbitRadius+h.r)>r&&(r=t)):((t=h.x-h.r)<n&&(n=t),(t=h.x+h.r)>i&&(i=t),(t=h.y-h.r)<a&&(a=t),(t=h.y+h.r)>r&&(r=t));return this.boundingBoxMemoized={x:n,y:a,w:i-n,h:r-a,x2:i,y2:r}},t}(),c=function(){function t(t,e,s,i,r,n,a){var h,o;this.game=t,this.x=e,this.y=s,this.r=i,this.team=null!=r?r:0,this.power=null!=n?n:0,this.options=null!=a?a:{},this.pressUp=X(this.pressUp,this),this.mouseDown=X(this.mouseDown,this),this.mouseOut=X(this.mouseOut,this),this.mouseOver=X(this.mouseOver,this),$.extend(!0,this,this.options),this.switchTeam(this.team),this.stage=this.game.stage,this.speedX=0,this.speedY=0,this.launchAngleRange=Math.sqrt((this.r-17.5).clamp(0,100)/100),this.maxPower=30,this.drawPower(),this.life=0,this.launcherAngle=0,null==this.orbitX||null==this.orbitY||isNaN(this.orbitX)||isNaN(this.orbitY)||(h=this.x-this.orbitX,o=this.y-this.orbitY,this.orbitRadius=Math.sqrt(h*h+o*o)),this.drawCursor(),this.cursor.visible=!1,this.drawSprite(),this.drawHighlight()}return t.prototype.getFuturePosition=function(t){var e,s,i;return null!=this.orbitX&&null!=this.orbitY&&this.orbitAng?(e=this.orbitAng+3e-4*this.orbitSpeed*t*10.5,s=this.orbitX+Math.cos(e)*this.orbitRadius,i=this.orbitY+Math.sin(e)*this.orbitRadius,[s,i]):[this.x,this.y]},t.prototype.switchTeam=function(t){var e;if(e=this.team,this.team=t,this.drawSprite(),this.growth=0,this.growthSpeed=.333,this.growthSpeed*=1+.8*(this.r.clamp(20,100)-20)/80,1===this.team?this.growthSpeed*=this.game.getMapProp("playerGrowthMultiplier")||1:0===this.team?this.growthSpeed*=.1:this.growthSpeed*=this.game.getMapProp("aiGrowthMultiplier")||1,1!==this.team&&(this.launcherActive=!1),this.mouseInPlanet&&(1===this.team?this.mouseOver():1===e&&(this.game.cursorPointer=!1)),this.life>10)return this.explode()},t.prototype.explode=function(){var t,e,s,i,r;for(s=this.game.isLowRes()?10:20,r=[],t=e=1,i=s;1<=i?e<=i:e>=i;t=1<=i?++e:--e)r.push(new a(this.game,{team:this.team,x:this.x+this.r*Math.cos(2*b*t/s),y:this.y+this.r*Math.sin(2*b*t/s),planet:this,length:2}));return r},t.prototype.drawSprite=function(){var t,e;if(t=this.sprite||new createjs.Shape,e=[x(this.team,0),x(this.team,1)],this.fillCommand=t.graphics.clear().beginLinearGradientFill(e,[0,1],.7*-this.r,.7*-this.r,.7*this.r,.7*this.r).command,t.graphics.drawCircle(0,0,this.r),t.x=this.x,t.y=this.y,!this.sprite)return this.sprite=t,this.game.planetsCont.addChild(t)},t.prototype.drawHighlight=function(){var t;if(t=this.hl||new createjs.Shape,t.graphics.clear().setStrokeStyle(8).beginStroke("#fff"),t.graphics.drawCircle(0,0,this.r-4),t.x=this.x,t.y=this.y,t.alpha=.5,t.visible=!1,!this.hl)return this.hl=t,this.game.planetsCont.addChild(t)},t.prototype.drawPower=function(){var t,e,s;return t=this.canUpgrade()?"#ff3c00":"white",this.powerText?(this.powerText.text=this.power,this.launcherActive&&(this.powerText.text="✦"),this.powerText.color=t,this.powerText.scaleX=this.powerText.scaleY=1):(e=20+35*((this.r-20)/50).clamp(0,1),s=new createjs.Text(this.power,e+"px circular,sans-serif",t),s.x=this.x,s.y=this.y,s.textBaseline="middle",s.textAlign="center",this.game.planetsCont.addChild(s),this.powerText=s,this.powerText.rotation=.1)},t.prototype.drawLauncher=function(t,e){var s,i;return null==t&&(t=this.launcherAngle),null==e&&(e=40),s=this.launcher||new createjs.Shape,s.x=this.x,s.y=this.y,s.alpha=.75,s.rotation=180*t/b,this.launcher||(this.game.cursorsCont.addChild(s),this.launcher=s),i=s.graphics,i.clear(),i.setStrokeStyle(5,"round","bevel").beginStroke(x(this.team)),i.moveTo(this.r,0),i.lineTo(this.r+e,0),i.lineTo(this.r+e-10,-10),i.moveTo(this.r+e,0),i.lineTo(this.r+e-10,10)},t.prototype.drawCursor=function(t){var e,s,i,r,n,a,h,o,l,u,c,d,g,m,f,y,w,v,x,M;if(null==t&&(t={}),l={cursorRadius:400,cursorAngle:0,showLinesOnly:!1},t=$.extend(!0,l,t),o=t.cursorRadius.clamp(0,p),h=this.cursor||new createjs.Container,h.x=this.x,h.y=this.y,h.rotation=180*t.cursorAngle/b,this.cursor||(this.game.cursorsCont.addChild(h),this.cursor=h),r=h.cursorField||new createjs.Shape,r.alpha=.5,u="#58277A",x="#983AC2",i="rgba(255,150,225,1)",g=b/2+this.launchAngleRange/2,w=this.r*Math.cos(-g),v=this.r*Math.sin(-g),r.graphics.moveTo(w,v),n=w+o*Math.cos(b/2-g),a=v+o*Math.sin(b/2-g),e=Math.atan2(a,n),s=Math.sqrt(this.r*this.r+o*o),r.graphics.clear(),r.graphics.setStrokeStyle(1),r.graphics.beginLinearGradientStroke(["rgba(255,255,255,1)","rgba(255,255,255,0)"],[.8,1],0,0,1e3,0),n=w+1200*Math.cos(b/2-g),a=v+1200*Math.sin(b/2-g),r.graphics.moveTo(w,v),r.graphics.lineTo(n,a),r.graphics.moveTo(w,-v),r.graphics.lineTo(n,-a),!t.showLinesOnly){for(r.graphics.beginFill(u),r.graphics.setStrokeStyle(1),r.graphics.beginStroke(x),r.graphics.arc(0,0,s,e,-e,!1),r.graphics.lineTo(w,-v),r.graphics.arc(0,0,this.r+1,g,-g,!0),r.graphics.closePath().endFill(),m=[.3,.5,.675,.825,.925],c=0,d=m.length;c<d;c++)(y=m[c])*p<o&&(f=y*p,n=w+f*Math.cos(b/2-g),a=v+f*Math.sin(b/2-g),e=Math.atan2(a,n),s=Math.sqrt(this.r*this.r+f*f),r.graphics.beginStroke(x),r.graphics.moveTo(n,a),r.graphics.arc(0,0,s,e,-e,!1));r.graphics.setStrokeStyle(5,"round","bevel").beginStroke(i),r.graphics.moveTo(.5*o,0),r.graphics.lineTo(.8*o,0),r.graphics.lineTo(.8*o-10,-10),r.graphics.moveTo(.8*o,0),r.graphics.lineTo(.8*o-10,10),h.cursorField||(h.addChild(r),h.cursorField=r)}if(M=h.text||new createjs.Text("","24px circular","#ffffff"),t.showLinesOnly?(M.text="AUTO",M.x=125):(M.text=this.getLaunchNumber(),M.x=(o-25).clamp(this.r+25,99999)),M.rotation=-h.rotation,M.textBaseline="middle",M.textAlign="center",!h.text)return h.addChild(M),h.text=M},t.prototype.getPageDimensions=function(){var t;return t=this.game.gamePositionToPagePosition(this.x,this.y),t.w=t.h=2*this.r*this.game.zoom,t},t.prototype.repositionTooltip=function(){var t;return t=this.getPageDimensions(),$(app.$refs.tooltipCont).css({left:t.x-t.w/2,top:t.y-t.h/2,width:t.w,height:t.h})},t.prototype.checkHover=function(){if(this.game.hoverPlanet!==this){if(this.mouseInPlanet)return this.mouseOver()}else if(this.game.hoverPlanet===this&&!this.mouseInPlanet)return this.mouseOut()},t.prototype.mouseOver=function(t){var e;if(this.game.hoverPlanet=this,(e=this.tooltip)&&(this.game.tooltipContent=e,app.$refs.tooltipCont._tooltip.show(),this.repositionTooltip()),1===this.team)return this.game.cursorPointer=!0},t.prototype.mouseOut=function(t){if(this.game.hoverPlanet===this&&(this.game.hoverPlanet=null),this.tooltip&&app.$refs.tooltipCont._tooltip.hide(),1===this.team&&!this.isPressed())return this.game.cursorPointer=!1},t.prototype.isPressed=function(){return this.game.pressedPlanet===this},t.prototype.mouseDown=function(t){if(1===this.team)return this.isSelected||this.game.deselectAllPlanets(),this.game.pressedPlanet=this},t.prototype.pressUp=function(t){var e,s,i,r,n,a,h,o;if(this.canLaunch()&&"launcher"!==this.game.pressedMode){if(n=this.getLaunchNumber(),this.spawnUnits(n,this.cursorAngle),this.isSelected)for(h=this.game.planets,e=0,i=h.length;e<i;e++)(a=h[e])!==this&&a.isSelected&&1===a.team&&a.spawnUnits(a.getLaunchNumber(),a.cursorAngle);this.game.deselectAllPlanets()}else if(this.canSetLauncher()&&(this.launcherAngle=this.cursorAngle,this.launcherActive=!0,this.drawPower(),this.isSelected))for(o=this.game.planets,s=0,r=o.length;s<r;s++)(a=o[s])!==this&&a.isSelected&&1===a.team&&(a.launcherAngle=a.cursorAngle,a.launcherActive=!0,a.drawPower());return this.mouseInPlanet||(this.game.cursorPointer=!1),this.isPressed()&&this.mouseInPlanet&&(this.isSelected=!0),this.mouseInPlanet&&"launcher"===this.game.pressedMode&&(this.launcherActive=!1,this.drawPower()),this.game.pressedPlanet=null,this.game.pressedMode=null},t.prototype.spawnUnit=function(t,e,s,i){var r;return null==t&&(t=0),null==e&&(e=this.launchAngleRange),null==s&&(s=1),null==i&&(i=0),this.game.units.push(r=new w(this.game,this,t,e,i)),this.power-=s,this.drawPower(),r},t.prototype.spawnUnits=function(t,e,s,i){var r,n,a,h;if(null==e&&(e=0),null==s&&(s=this.launchAngleRange),null==i&&(i=1),this.power<i*t&&(t=~~(this.power/i)),0!==t){for(h=[],r=n=1,a=t;1<=a?n<=a:n>=a;r=1<=a?++n:--n)h.push(this.spawnUnit(e,s,i,4*r));return h}},t.prototype.getLaunchNumber=function(){var t;return t=(this.mouseDist-this.r)/(p-this.r),t=t.clamp(0,1),(~~((this.power+1)*t)).clamp(1,this.power)},t.prototype.canLaunch=function(){return 1===this.team&&this.isPressed()&&!this.mouseInPlanet&&this.power},t.prototype.canSetLauncher=function(){return 1===this.team&&this.isPressed()&&!this.mouseInPlanet&&"launcher"===this.game.pressedMode},t.prototype.canLaunchLasso=function(){return 1===this.team&&this.isSelected&&this.game.pressedPlanet&&!this.isPressed()&&this.game.pressedPlanet.canLaunch()&&this.power&&!this.launcherActive},t.prototype.canUpgrade=function(){return!1},t.prototype.update=function(){var t,e,s,i,r,n,a,h,o,l,p,u,c,d,g,m,f,y,w,v,x,b,M,P,A,L,T,X,Y,k,F,z,R,U,I,O,B,E,D,G,_,j,H,N;if(this.life+=1,this.growth<100&&(this.growth+=this.growthSpeed,this.life>5e3&&(this.growth+=this.growthSpeed*this.life/1e4),this.life>2e3&&(this.growthSpeed*=1.00001)),this.growth>=100&&this.power<this.maxPower&&(this.power+=1,this.drawPower(),this.growth=0),l=!1,this.life%5==0)for(T=this.game.planets,u=0,g=T.length;u<g;u++)(A=T[u])!==this&&(e=Math.sqrt(Math.pow(A.x-this.x,2)+Math.pow(A.y-this.y,2)),j=this.r+A.r+10,e<j&&(o=1-e/j,L=Math.atan2(A.y-this.y+S(-.01,.01),A.x-this.x+S(-.01,.01)),B=-Math.cos(L)*o,E=-Math.sin(L)*o,this.speedX+=B,this.speedY+=E,l=!0));for(null!=this.orbitX&&null!=this.orbitY&&this.orbitRadius&&this.life%5==0&&(l&&(r=this.x-this.orbitX+B,a=this.y-this.orbitY+E,_=Math.sqrt(r*r+a*a),this.orbitRadius+=.5*(_-this.orbitRadius)),i=this.x-this.orbitX,n=this.y-this.orbitY,this.orbitAng=Math.atan2(n,i),b=this.orbitAng+3e-4*this.orbitSpeed*5,M=this.orbitX+Math.cos(b)*this.orbitRadius,P=this.orbitY+Math.sin(b)*this.orbitRadius,this.speedX+=(.5*(M-this.x)).clamp(-1,1),this.speedY+=(.5*(P-this.y)).clamp(-1,1)),this.x+=this.speedX,this.y+=this.speedY,X=["hl","sprite","cursor","powerText"],c=0,m=X.length;c<m;c++)p=X[c],this[p].x=this.x,this[p].y=this.y;if(this.speedX*=.95,this.speedY*=.95,this.hl.visible=!1,1===this.team&&(this.isPressed()||this.isSelected?(this.hl.visible=!0,this.hl.alpha=1):this.mouseInPlanet&&!this.game.lasso.visible&&(this.hl.visible=!0,this.hl.alpha=.5)),n=this.game.mouseY-this.y,i=this.game.mouseX-this.x,this.cursorAngle=Math.atan2(n,i),this.mouseDist=Math.sqrt(n*n+i*i),this.mouseInPlanet=this.mouseDist<this.r+2,this.checkHover(),null!=(Y=this.launcher)&&(Y.visible=!1),null!=(k=this.cursor)&&(k.visible=!1),this.isPressed()&&(this.game.pressedMode||!this.canUpgrade()&&!this.launcherActive?"launcher"!==this.game.pressedMode||this.canUpgrade()||this.launcherActive||(this.game.pressedMode=null):this.game.pressedMode="launcher"),this.canSetLauncher()?(this.drawLauncher(this.cursorAngle),this.drawCursor({showLinesOnly:!0,cursorAngle:this.cursorAngle}),this.launcher.visible=!0,this.cursor.visible=!0):(this.canLaunch()||this.canLaunchLasso())&&(this.drawCursor({cursorRadius:this.mouseDist,cursorAngle:this.cursorAngle}),this.cursor.visible=!0),this.launcherActive&&this.launcherAngle&&(this.canSetLauncher()||this.drawLauncher(this.launcherAngle),0===C(0,100-this.power)&&this.power>1&&this.spawnUnits(1,this.launcherAngle,null,0),this.launcher.visible=!0),this.team>1&&0===C(0,250)&&this.life>100&&this.power>4){for(G=null,v=Infinity,F=this.game.planets,y=0,f=F.length;y<f;y++)A=F[y],A.team!==this.team&&(e=Math.sqrt(Math.pow(A.x-this.x,2)+Math.pow(A.y-this.y,2)))<v&&(v=e,G=A);G&&(z=G.getFuturePosition(1*v),H=z[0],N=z[1],Math.abs(G.orbitSpeed)>=.4&&(s=Math.sqrt(Math.pow(H-this.x,2)+Math.pow(N-this.y,2)),R=G.getFuturePosition(1*s),H=R[0],N=R[1],t=5,U=[H+S(-1,1)*t,N+S(-1,1)*t],H=U[0],N=U[1],Math.abs(G.orbitSpeed)>=1.4&&(s=Math.sqrt(Math.pow(H-this.x,2)+Math.pow(N-this.y,2)),I=G.getFuturePosition(1*s),H=I[0],N=I[1],O=[H+S(-1,1)*t,N+S(-1,1)*t],H=O[0],N=O[1])),D=Math.atan2(N-this.y,H-this.x),x=.5,w=1,h=this.game.getMapProp("aiLaunchMultiplier"),null!=h&&(x*=h,w*=h),d=~~(this.power*S(x,w)),this.spawnUnits(d,D))}if(this.powerText&&this.canUpgrade())return this.powerText.scaleX=this.powerText.scaleY=1+.15*Math.sin(.1*this.life)+.075,this.powerText.rotation=5*Math.sin(.05*this.life)},t}(),w=function(){function t(t,e,s,i,r){var n,a,h,o;this.game=t,this.planet=e,this.mouseAngle=s,this.angleRange=i,this.delay=r,this.size=.35,this.speed=1+S(-.05,.05),null==this.angleRange&&(this.angleRange=this.planet.launchAngleRange),this.team=this.planet.team,this.color=x(this.team,2),n=null!=(o=x(this.team,3))?o:x(this.team,1),this.trailColor=new T("#2D225B").mix(n,.5).toHex(),this.hasTrail=!L()&&(this.game.fps.fps>52||(this.game.fps.fps>44?C(0,100)>25:this.game.fps.fps>36?C(0,100)>50:this.game.fps.fps>28&&C(0,100)>75)),a=S(-.4,.4)+S(-.1,.1),this.angle=this.mouseAngle+a*this.angleRange,h=b/2+this.angleRange/2,this.positionAngle=this.mouseAngle+a*h*2*.9}return t.prototype.drawSprite=function(){var t;if(t=new createjs.Shape,t.graphics.clear().beginFill(this.color),t.graphics.moveTo(15*this.size,0),t.graphics.lineTo(-15*this.size,10*this.size),t.graphics.lineTo(-10*this.size,0),t.graphics.lineTo(-15*this.size,-10*this.size),t.graphics.closePath(),t.x=this.planet.x+(.9*this.planet.r-5)*Math.cos(this.positionAngle),t.y=this.planet.y+(.9*this.planet.r-5)*Math.sin(this.positionAngle),t.rotation=180*this.angle/b,t.scaleX=.01,t.scaleY=.01,!this.sprite)return this.sprite=t,this.game.unitsCont.addChild(t)},t.prototype.drawTrail=function(t){var e;return e=this.trail||new createjs.Shape,e.graphics.clear(),e.graphics.setStrokeStyle(1).beginStroke(this.trailColor),e.graphics.moveTo(0,0),e.graphics.lineTo(-t,0),e.rotation=180*this.angle/b+180,this.trail||(this.trail=e,this.game.trailsCont.addChild(e)),e},t.prototype.update=function(){var t,e,s,i,r,n,a,h;if(this.life||(this.life=0),this.delay>0&&(this.delay-=1),0!==this.delay||this.sprite||this.drawSprite(),0===this.delay&&(this.life+=1),a=this.sprite)if(this.ox||(this.ox=a.x),this.oy||(this.oy=a.y),i=this.speed*Math.cos(this.angle),r=this.speed*Math.sin(this.angle),this.dead&&(i*=.75,r*=.75),a.x+=i*a.scaleX,a.y+=r*a.scaleX,this.life%10==0&&this.hasTrail&&(i=a.x-this.ox,r=a.y-this.oy,s=Math.sqrt(i*i+r*r)+5,h=this.drawTrail(s),h.x=this.ox,h.y=this.oy),this.dead){if(a.scaleY=a.scaleX*=.85,null!=(n=this.trail)&&(n.alpha=a.scaleX),a.scaleX<.15&&!this.unleashedParticles&&this.targetPlanet&&(this.unleashParticles(this.targetPlanet),this.unleashedParticles=!0),a.scaleX<=.05)return this.targetPlanet&&this.collide(this.targetPlanet),this.remove()}else{if(a.scaleX<=1&&this.delay<=0&&(a.scaleX+=.075*(1-a.scaleX),a.scaleY=a.scaleX),this.life%7==0&&this.checkCollisions(),this.life>2e3*this.speed)return this.dead=!0;if(this.life%100==0&&(e=60,t=this.game.getBoundingBox(),a.x<t.x-e||a.x>t.x+t.w+e||a.y<t.y-e||a.y>t.y+t.h+e))return this.dead=!0}},t.prototype.checkCollisions=function(){var t,e,s,i,r;for(r=this.sprite,i=this.game.planets,t=0,e=i.length;t<e;t++)if((s=i[t])!==this.planet&&Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))<s.r)return this.dead=!0,this.targetPlanet=s},t.prototype.unleashParticles=function(t){var e,s,i,r;if(t.team!==this.team){for(s=C(1,2)+C(1,2),this.game.isLowRes()&&(s=1),r=[],e=1,i=s;1<=i?e<=i:e>=i;1<=i?++e:--e)r.push(new a(this.game,{team:this.team,x:this.sprite.x,y:this.sprite.y,planet:t}));return r}},t.prototype.collide=function(t){var e;return e=t,1===this.team?s.play("blip",.14):s.play("blip2",.08),e.team===this.team?e.power<e.maxPower&&(e.power+=1):e.power<=0?(e.power=1,e.switchTeam(this.team),1===this.team?s.play("pulse",.5):s.play("pulse2",.25)):(e.power-=1,e.power=e.power.clamp(0,999),e.launcherActive?(e.launcherActive=!1,e.growth=0):e.growth*=.5),e.drawPower()},t.prototype.remove=function(){var t,e;return this.sprite.parent.removeChild(this.sprite),null!=(e=this.trail)&&e.parent.removeChild(this.trail),t=this.game.units.indexOf(this),this.game.units.splice(t,1)},t}(),h=function(){function t(t){this.game=t,this.filterStrength=20,this.frameTime=0,this.lastLoop=new Date,this.fps=0,setInterval(function(t){return function(){return t.fps=1e3/t.frameTime}}(this),500)}return t.prototype.update=function(){var t,e;return t=(e=new Date)-this.lastLoop,this.frameTime+=(t-this.frameTime)/this.filterStrength,this.lastLoop=e},t}(),u=function(){function t(t,e){this.game=t,$.extend(!0,this,e),this.game.parts.push(this),this.sprite=this.draw(),this.game[this.parentContName].addChild(this.sprite)}return t.prototype.destroy=function(){var t;return this.sprite.parent.removeChild(this.sprite),t=this.game.parts.indexOf(this),this.game.parts.splice(t,1)},t}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Y(e,t),e.prototype.parentContName="unitsCont",e.prototype.draw=function(){var t,e;return t=S(.5,2)*S(.5,2)*(this.length||1),e=this.sprite||new createjs.Shape,e.graphics.clear().setStrokeStyle(1).beginStroke(x(this.team)),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),this.ang=Math.atan2(this.y-this.planet.y,this.x-this.planet.x)+S(-.25,.25),this.speed=S(1,2),e.rotation=180*this.ang/b,e.x=.9*this.x+.1*this.planet.x,e.y=.9*this.y+.1*this.planet.y,e},e.prototype.update=function(){var t;if(t=this.sprite,this.life||(this.life=0),this.life+=1,this.life<5?(t.scaleX*=1+.2*(5-this.life),this.speed*=.99):(t.scaleX*=.97,t.alpha*=.98,t.x+=this.speed*Math.cos(this.ang),t.y+=this.speed*Math.sin(this.ang),this.speed*=.96),t.scaleX<=.04)return this.destroy()},e}(u),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Y(e,t),e.prototype.parentContName="starsCont",e.prototype.draw=function(){var t,e;return t=this.sprite||new createjs.Shape,t.graphics.clear().beginFill("#775CF4"),t.graphics.moveTo(0,0),t.graphics.arc(1,-1,1,b/2,b),t.graphics.arc(-1,-1,1,0,b/2),t.graphics.arc(-1,1,1,-b/2,0),t.graphics.arc(1,1,1,b,-b/2),t.graphics.closePath(),e=C(2,3)+S(0,1.5)*S(0,1.5)*S(0,1.5),this.z=1/e/e,t.scaleX=e,t.scaleY=e,this.x=t.x=C(-1200,1200),this.y=t.y=C(-600,600),t.alpha=S(.25,1),t},e.prototype.update=function(){var t;return t=this.sprite,t.x=this.x+-.08*(this.game.mouseX||0)*this.z,t.y=this.y+-.08*(this.game.mouseY||0)*this.z},e}(u),f=function(){function t(t){this.game=t,(this.data=this.load())?P("Loaded!"):this.init()}return t.prototype.localStorageKey="planetZeroSaveData",t.prototype.init=function(){return this.data={levelsCompleted:[],stars:0,currentLevel:0,soundEnabled:!0},this.save(this.data)},t.prototype.save=function(t){return localStorage.setItem(this.localStorageKey,JSON.stringify(t))},t.prototype.load=function(){return JSON.parse(localStorage.getItem(this.localStorageKey))},t.prototype.isLevelComplete=function(t){return this.data.levelsCompleted[t]},t.prototype.completeLevel=function(t){return this.data.levelsCompleted[t]=!0,this.save(this.data)},t.prototype.saveProperty=function(t,e){return this.data[t]=e,this.save(this.data)},t.prototype.clear=function(){return localStorage.clear(),this.init()},t}(),d=function(){function t(t){this.game=t,this.buffer=[],this.preload()}return t.prototype.preload=function(t){var e,s,i,r;for(t||(t="bongo,blip,blip2,pulse,pulse2,victory,loss"),r=t.split(","),s=0,i=r.length;s<i;s++)e=r[s],this.buffer[e]=new Audio("./sfx/"+e+".wav"),this.buffer[e].volume=.01,this.buffer[e].play();if(this.music=new Audio("./music1.mp3"),this.music.loop=!0,this.game.storage.data.soundEnabled)return this.music.currentTime=2,this.music.play()},t.prototype.play=function(t,e){var s;if(null==e&&(e=.25),this.game.storage.data.soundEnabled)return s=this.buffer[t],s||(this.preload(t),s=this.buffer[t]),s.currentTime=0,s.volume=e,s.play()},t.prototype.toggleSound=function(){var t;return t=!this.game.storage.data.soundEnabled,this.game.storage.saveProperty("soundEnabled",t),t?this.music.play():this.music.pause()},t}(),window.app=new Vue({el:"#app",data:{g:{}}}),window.app.g=window.g=new o,window.app.s=window.s=new d(g),M()}]);